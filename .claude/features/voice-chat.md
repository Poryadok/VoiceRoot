# Voice Chat — войс-чат

## Контексты и типы

| Контекст | Тип | Как работает |
|----------|-----|--------------|
| DM | Звонок | Как в Telegram — инициируешь вызов, собеседник принимает |
| Группа / Спейс | Войс-группа | Участники говорят от своего имени, заходят когда хочется (Discord-стиль) |
| Спейс | Войс-канал | Вещание от имени канала-сущности, вход контролируется правами |

Модель канал vs группа — та же, что в текстовом чате: разница в том, от чьего лица идёт вещание.

## Видео и камера

- В DM: аудио-звонок или видео-звонок (выбирается при инициации)
- В войс-чате: камера включается кнопкой после входа в канал (как шара экрана)

## Командирский канал

- Это обычный войс-канал/группа с флагом **"трансляция"** в настройках
- В настройках указываются целевые войс-чаты спейса (все или выборочные)
- Когда командир говорит → аудио транслируется во все указанные чаты
- Аудио суб-чатов **приглушается (ducking)** во время трансляции
- Суб-чаты между собой не общаются — каждый изолирован
- Участники суб-чата слышат командира, но сами в командирский канал не транслируются
- Вход в командирский канал ограничен (не для всех)

## Режимы доступа к микрофону (через настройки прав)

| Режим | Кто может включить микрофон |
|-------|-----------------------------|
| Обычный | Каждый сам |
| Рейд / Школа | Только пользователь с ролью "организатор" |

Режим не является отдельным типом — это конфигурация прав ролей в настройках войс-чата.

## Поднять руку

- Доступно во всех войс-чатах
- Включается/выключается в настройках чата
- Обязательная фича для режима школа/рейд
- Организатор видит запросы и выдаёт/забирает слово

## UX и статусы (как в Discord)

- Видно кто сидит в войс-канале без захода внутрь
- Индикатор "кто говорит" — анимация/подсветка аватара
- Push-to-talk или Voice Activity Detection — выбор пользователя
- Noise cancellation — опция в настройках
- Мьют участника модератором
- Регулировка громкости отдельных участников

## Мобайл

- Войс продолжается в фоне при сворачивании приложения

## Запись

- Запись войс-сессий: да (детали реализации TBD)

## TBD / Открытые вопросы

- Детали реализации ducking (серверное микширование)
- Детали записи (хранение, доступ, retention)
- Ролевая модель — отдельное обсуждение
- Лимит участников в войс-чате
